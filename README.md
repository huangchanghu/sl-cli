# sl-cli (Super Link CLI)

**sl-cli** æ˜¯ä¸€ä¸ªé«˜åº¦å¯æ‰©å±•çš„ç°ä»£å‘½ä»¤è¡Œå·¥å…·ï¼Œæ—¨åœ¨æˆä¸ºä½ æ—¥å¸¸å·¥ä½œæµçš„â€œè¶…çº§ç²˜åˆå‰‚â€ã€‚

å®ƒé‡‡ç”¨ **Go åŸç”Ÿä»£ç ** + **YAML åŠ¨æ€é…ç½®** çš„æ··åˆé©±åŠ¨æ¨¡å¼ã€‚ä½ æ—¢å¯ä»¥é€šè¿‡ç¼–å†™ Go ä»£ç å¼€å‘é«˜æ€§èƒ½çš„æ ¸å¿ƒå‘½ä»¤ï¼Œä¹Ÿå¯ä»¥é€šè¿‡ä¿®æ”¹é…ç½®æ–‡ä»¶ç¬é—´æŒ‚è½½ RESTful APIã€Shell è„šæœ¬æˆ–ç³»ç»Ÿå‘½ä»¤åˆ«åï¼Œè€Œæ— éœ€é‡æ–°ç¼–è¯‘ã€‚

## âœ¨ æ ¸å¿ƒç‰¹æ€§

* **âš¡ï¸ æ··åˆé©±åŠ¨å¼•æ“**ï¼šæ”¯æŒåŸç”Ÿ Go å‘½ä»¤æ‰©å±• + YAML é…ç½®åŠ¨æ€åŠ è½½ã€‚
* **ğŸŒ å¼ºå¤§çš„ HTTP æ‰§è¡Œå™¨**ï¼š
  * æ”¯æŒè‡ªå®šä¹‰ Headersï¼ˆæ”¯æŒç¯å¢ƒå˜é‡æ³¨å…¥ï¼Œå¦‚ `${TOKEN}`ï¼‰ã€‚
  * æ”¯æŒ Go Template è¯­æ³•åŠ¨æ€æ¸²æŸ“ URL å’Œ Bodyã€‚
  * **ç®¡é“æ”¯æŒ (Pipe)**ï¼šæ”¯æŒå°† API å“åº”ç›´æ¥ä¼ é€’ç»™ `jq` ç­‰å·¥å…·å¤„ç†ã€‚
  * å†…ç½®ä¼˜é›…çš„åŠ è½½åŠ¨ç”» (Spinner)ã€‚
* **ğŸš Shell/Script é›†æˆ**ï¼šæ”¯æŒç›´æ¥åœ¨é…ç½®ä¸­ç¼–å†™å¤šè¡Œ Shell è„šæœ¬ï¼Œæ”¯æŒäº¤äº’å¼è¾“å…¥ã€‚
* **ğŸ–¥ ç³»ç»Ÿå‘½ä»¤é€ä¼ **ï¼šå¯ä»¥ä½œä¸º `git`, `docker`, `kubectl` ç­‰å¤æ‚å‘½ä»¤çš„å¿«æ·åˆ«åç®¡ç†å™¨ã€‚
* **ğŸ MacOS æ·±åº¦é€‚é…**ï¼š
  * è‡ªåŠ¨ç”Ÿæˆå¹¶å®‰è£… **Zsh/Bash è‡ªåŠ¨è¡¥å…¨**ã€‚
  * è‡ªåŠ¨ç”Ÿæˆå¹¶å®‰è£… **Man Pages** æ–‡æ¡£ã€‚
  * æ”¯æŒå½©è‰²è¾“å‡ºã€‚
* **ğŸ›  é…ç½®ç®¡ç†**ï¼šå†…ç½®é…ç½®è¯­æ³•æ£€æŸ¥ (`config check`) å’Œåˆå§‹åŒ–å·¥å…· (`config init`)ã€‚

## ğŸš€ å®‰è£…æŒ‡å—

### å‰ç½®è¦æ±‚

* Go 1.24.0+
* Make
* (å¯é€‰) `jq` - ç”¨äºæµ‹è¯• JSON æ ¼å¼åŒ–ç®¡é“åŠŸèƒ½

### ç¼–è¯‘ä¸å®‰è£…

æˆ‘ä»¬æä¾›äº†å®Œå–„çš„ `Makefile`ï¼Œä¸€é”®å®Œæˆç¼–è¯‘ã€å®‰è£…äºŒè¿›åˆ¶ã€è¡¥å…¨è„šæœ¬å’Œæ–‡æ¡£ã€‚

```bash
# 1. å…‹éš†é¡¹ç›®
git clone https://github.com/huangchanghu/sl-cli.git
cd sl-cli

# 2. å®‰è£… (éœ€è¦ sudo æƒé™ä»¥å†™å…¥ /usr/local/bin)
make install

# 3. éªŒè¯å®‰è£…
sl-cli version
```

> **æ³¨æ„**ï¼šå®‰è£…å®Œæˆåï¼Œè¯·é‡æ–°æ‰“å¼€ç»ˆç«¯æˆ–è¿è¡Œ `source ~/.zshrc` ä»¥ä½¿è‡ªåŠ¨è¡¥å…¨ç”Ÿæ•ˆã€‚

---

## âš™ï¸ é…ç½®æŒ‡å—

`sl-cli` ä¼šæŒ‰ä»¥ä¸‹é¡ºåºæŸ¥æ‰¾é…ç½®æ–‡ä»¶ï¼š
1. `$HOME/.config/sl-cli/sl-cli.yaml`ï¼ˆé»˜è®¤ä½ç½®ï¼‰
2. å½“å‰ç›®å½•ä¸‹çš„ `sl-cli.yaml`
3. `$HOME/.sl-cli.yaml`ï¼ˆæ—§ç‰ˆå…¼å®¹ï¼‰

### å¿«é€Ÿä¸Šæ‰‹

ç”Ÿæˆé»˜è®¤ç¤ºä¾‹é…ç½®ï¼š

```bash
sl-cli config init
```

### é…ç½®æ–‡ä»¶è¯¦è§£ (`sl-cli.yaml`)

```yaml
commands:
  # ------------------------------------------------------------------
  # åœºæ™¯ 1: è°ƒç”¨ RESTful API (å¸¦ Token å’Œ ç®¡é“å¤„ç†)
  # ------------------------------------------------------------------
  - name: "weather"
    usage: "æŸ¥è¯¢å¤©æ°”å¹¶æ ¼å¼åŒ– (ç”¨æ³•: sl-cli weather London)"
    type: "http"
    api:
      # ä½¿ç”¨ {{index .args 0}} è·å–å‘½ä»¤è¡Œç¬¬ä¸€ä¸ªå‚æ•°
      url: "https://goweather.herokuapp.com/weather/{{index .args 0}}"
      method: "GET"
      headers:
        Authorization: "Bearer ${MY_API_TOKEN}" # è¯»å–ç¯å¢ƒå˜é‡
      # [é«˜çº§ç‰¹æ€§] å°† API ç»“æœä½œä¸º stdin ä¼ ç»™ jq å‘½ä»¤
      pipes:
        - command: "jq"
          args: ["."]

  # ------------------------------------------------------------------
  # åœºæ™¯ 2: æ‰§è¡Œå¤šè¡Œ Shell è„šæœ¬
  # ------------------------------------------------------------------
  - name: "deploy"
    usage: "æ‰§è¡Œæ¨¡æ‹Ÿéƒ¨ç½²è„šæœ¬"
    type: "shell"
    script: |
      echo "æ­£åœ¨æ„å»ºé¡¹ç›®..."
      sleep 1
      echo "éƒ¨ç½²åˆ°ç¯å¢ƒ: {{index .args 0}}"
      echo "å®Œæˆ!"

  # ------------------------------------------------------------------
  # åœºæ™¯ 3: ç³»ç»Ÿå‘½ä»¤åˆ«å (Alias)
  # ------------------------------------------------------------------
  - name: "gl"
    usage: "ä¼˜é›…çš„ Git Log"
    type: "system"
    command: "git"
    # é¢„è®¾å‚æ•°ï¼Œç”¨æˆ·è¾“å…¥çš„é¢å¤–å‚æ•°ä¼šè¿½åŠ åœ¨æœ€å
    args: ["log", "--graph", "--oneline", "--decorate"]
```

### æ£€æŸ¥é…ç½®

ä¿®æ”¹é…ç½®åï¼Œå»ºè®®è¿è¡Œæ£€æŸ¥å‘½ä»¤ä»¥ç¡®ä¿è¯­æ³•æ­£ç¡®ï¼š

```bash
sl-cli config check
```

---

## ğŸ’» å¼€å‘ä¸æ‰©å±•

### ç›®å½•ç»“æ„

```text
sl-cli/
â”œâ”€â”€ cmd/sl-cli/main.go      # å…¥å£æ–‡ä»¶
â”œâ”€â”€ sl-cli.yaml             # é…ç½®æ–‡ä»¶
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ executor/           # æ‰§è¡Œå™¨æ ¸å¿ƒ (HTTP, Shell, System, Pipe)
â”‚   â””â”€â”€ config/             # é…ç½®è§£æ
â”œâ”€â”€ pkg/cmd/                # å‘½ä»¤å­˜æ”¾ç›®å½•
â”‚   â”œâ”€â”€ root.go             # æ ¹å‘½ä»¤ & åŠ¨æ€åŠ è½½é€»è¾‘
â”‚   â”œâ”€â”€ version.go          # [åŸç”Ÿ] ç‰ˆæœ¬å‘½ä»¤
â”‚   â””â”€â”€ config_ops.go       # [åŸç”Ÿ] é…ç½®ç®¡ç†å‘½ä»¤
â””â”€â”€ Makefile                # æ„å»ºè„šæœ¬
```

### å¦‚ä½•æ·»åŠ åŸç”Ÿ Go å‘½ä»¤

å¦‚æœä½ éœ€è¦éå¸¸å¤æ‚çš„é€»è¾‘ï¼ˆå¦‚æ•°æ®åº“æ“ä½œã€äº¤äº’å¼ UIï¼‰ï¼Œå»ºè®®æ·»åŠ åŸç”Ÿå‘½ä»¤ï¼š

1. åœ¨ `pkg/cmd/` ä¸‹æ–°å»ºæ–‡ä»¶ï¼ˆä¾‹å¦‚ `my_cmd.go`ï¼‰ã€‚
2. å®šä¹‰ `cobra.Command`ã€‚
3. åœ¨ `init()` ä¸­è°ƒç”¨ `rootCmd.AddCommand(yourCmd)`ã€‚

ç¤ºä¾‹ï¼š

```go
package cmd
import "github.com/spf13/cobra"

var myCmd = &cobra.Command{
    Use: "hello",
    Run: func(cmd *cobra.Command, args []string) {
        println("Hello from Native Go!")
    },
}

func init() {
    rootCmd.AddCommand(myCmd)
}
```

4. é‡æ–°ç¼–è¯‘ï¼š`make install`

---

## ğŸ—‘ å¸è½½

å¦‚æœä½ æƒ³å½»åº•ç§»é™¤ sl-cliï¼ˆåŒ…æ‹¬äºŒè¿›åˆ¶ã€æ–‡æ¡£å’Œè¡¥å…¨è„šæœ¬ï¼‰ï¼š

```bash
make uninstall
```

## ğŸ“„ License

MIT License
